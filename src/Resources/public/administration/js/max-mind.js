(function(){var e={565:function(){},235:function(e,r,t){var n=t(565);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals),t(346).Z("664e684b",n,!0,{})},346:function(e,r,t){"use strict";function n(e,r){for(var t=[],n={},a=0;a<r.length;a++){var s=r[a],i=s[0],o={id:e+":"+a,css:s[1],media:s[2],sourceMap:s[3]};n[i]?n[i].parts.push(o):t.push(n[i]={id:i,parts:[o]})}return t}t.d(r,{Z:function(){return h}});var a="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!a)throw Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var s={},i=a&&(document.head||document.getElementsByTagName("head")[0]),o=null,d=0,l=!1,c=function(){},u=null,m="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(e,r,t,a){l=t,u=a||{};var i=n(e,r);return g(i),function(r){for(var t=[],a=0;a<i.length;a++){var o=s[i[a].id];o.refs--,t.push(o)}r?g(i=n(e,r)):i=[];for(var a=0;a<t.length;a++){var o=t[a];if(0===o.refs){for(var d=0;d<o.parts.length;d++)o.parts[d]();delete s[o.id]}}}}function g(e){for(var r=0;r<e.length;r++){var t=e[r],n=s[t.id];if(n){n.refs++;for(var a=0;a<n.parts.length;a++)n.parts[a](t.parts[a]);for(;a<t.parts.length;a++)n.parts.push(_(t.parts[a]));n.parts.length>t.parts.length&&(n.parts.length=t.parts.length)}else{for(var i=[],a=0;a<t.parts.length;a++)i.push(_(t.parts[a]));s[t.id]={id:t.id,refs:1,parts:i}}}}function f(){var e=document.createElement("style");return e.type="text/css",i.appendChild(e),e}function _(e){var r,t,n=document.querySelector("style["+m+'~="'+e.id+'"]');if(n){if(l)return c;n.parentNode.removeChild(n)}if(p){var a=d++;r=w.bind(null,n=o||(o=f()),a,!1),t=w.bind(null,n,a,!0)}else r=S.bind(null,n=f()),t=function(){n.parentNode.removeChild(n)};return r(e),function(n){n?(n.css!==e.css||n.media!==e.media||n.sourceMap!==e.sourceMap)&&r(e=n):t()}}var v=function(){var e=[];return function(r,t){return e[r]=t,e.filter(Boolean).join("\n")}}();function w(e,r,t,n){var a=t?"":n.css;if(e.styleSheet)e.styleSheet.cssText=v(r,a);else{var s=document.createTextNode(a),i=e.childNodes;i[r]&&e.removeChild(i[r]),i.length?e.insertBefore(s,i[r]):e.appendChild(s)}}function S(e,r){var t=r.css,n=r.media,a=r.sourceMap;if(n&&e.setAttribute("media",n),u.ssrId&&e.setAttribute(m,r.id),a&&(t+="\n/*# sourceURL="+a.sources[0]+" */\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},r={};function t(n){var a=r[n];if(void 0!==a)return a.exports;var s=r[n]={id:n,exports:{}};return e[n](s,s.exports,t),s.exports}t.d=function(e,r){for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="bundles/maxmind/",window?.__sw__?.assetPath&&(t.p=window.__sw__.assetPath+"/bundles/maxmind/"),Shopware.Component.override("sw-order-list",{template:'                {% block sw_order_list_grid_columns_delivery_address %}\n                <template #column-deliveries.id="{ item }">\n                    <template v-if="item.deliveries && item.deliveries[0] && item.deliveries[0].shippingOrderAddress">\n                        <div\n                            v-tooltip="{\n                                showDelay: 300,\n                                width: 400,\n                                disabled: item.deliveries.length <= 1,\n                                message: deliveryTooltip(item.deliveries)\n                            }"\n                            class="sw-order-list__delivery_address">\n                            {{ item.deliveries[0].shippingOrderAddress.street }},\n                            {{ item.deliveries[0].shippingOrderAddress.city }},\n                            {{ getStateNameById(item.deliveries[0].shippingOrderAddress.countryStateId) }},\n\n                            {{ item.deliveries[0].shippingOrderAddress.zipcode }}\n                        </div>\n                    </template>\n                </template>\n                {% endblock %}\n                {% block sw_order_list_grid_columns_amount %}\n                    <template #column-amountTotal="{ item }">\n                        {{ (item.amountTotal).toFixed(2) }} {{ item.currency.translated.shortName }}\n                    </template>\n                {% endblock %}',data(){return{loadedStates:{}}},watch:{orders:{handler(){this.loadCountryStates()},immediate:!0,deep:!0}},computed:{orderColumns(){let e=this.$super("orderColumns");return e.push({property:"customFields.maxmind_fraud_risk",label:"Fraud Risk Score",allowResize:!0,align:"right",sortable:!0,rawData:!0,renderer(e,r){let t=r?.customFields?.maxmind_fraud_risk;return null!=t?parseFloat(t):"-"}}),e}},methods:{async loadCountryStates(){let e=this.repositoryFactory.create("country_state"),r=[...new Set(this.orders.map(e=>e.deliveries?.[0]?.shippingOrderAddress?.countryStateId).filter(Boolean))];if(0===r.length)return;let t=new Shopware.Data.Criteria(1,100);t.addFilter(Shopware.Data.Criteria.equalsAny("id",r));try{let r=await e.search(t);this.loadedStates=r.reduce((e,r)=>(e[r.id]=r,e),{})}catch(e){console.error("Failed to load country states:",e)}},getStateNameById(e){return this.loadedStates?.[e]?.name??""}}}),Shopware.Component.override("sw-order-detail-general",{template:'{% block sw_order_detail_general %}\n    <sw-card v-if="hasMaxMindData">\n        <div\n            class="sw-order-detail-general__maxmind-risk-scores"\n        >\n            <h3>\n                {{ $tc(\'sw-order-detail-general.maxmindRiskScores.title\') }}\n            </h3>\n            <div\n                class="sw-order-detail-general__maxmind-scores"\n            >\n                <div\n                    class="sw-order-detail-general__maxmind-score"\n                >\n                    <strong>\n                        {{ $tc(\'sw-order-detail-general.maxmindRiskScores.fraudRisk\') }}\n                    </strong>\n                    <span>{{ fraudScore }}</span>\n                </div>\n                <div\n                    class="sw-order-detail-general__maxmind-score"\n                >\n                    <strong>\n                        {{ $tc(\'sw-order-detail-general.maxmindRiskScores.overallRiskScore\') }}\n                    </strong>\n                    <span>{{ overallRiskScore }}</span>\n                </div>\n                <div\n                    class="sw-order-detail-general__maxmind-score"\n                >\n                    <strong>\n                        {{ $tc(\'sw-order-detail-general.maxmindRiskScores.ipRiskScore\') }}\n                    </strong>\n                    <span>{{ ipRiskScore }}</span>\n                </div>\n            </div>\n            <div\n                class="sw-order-detail-general__maxmind-actions"\n            >\n                <a\n                    :href="transactionUrl"\n                    target="_blank"\n                    class="sw-button sw-button--primary"\n                >\n                    {{ $tc(\'sw-order-detail-general.maxmindFraudDetection.viewInMaxMind\') }}\n                </a>\n                <sw-button\n                    variant="ghost"\n                    @click="copyTransactionId"\n                >\n                    {{ $tc(\'sw-order-detail-general.maxmindFraudDetection.copyTransactionId\') }}\n                </sw-button>\n                <sw-button\n                    variant="ghost"\n                    @click="toggleWarningsFactors"\n                >\n                    {{ $tc(\'sw-order-detail-general.maxmindFraudDetection.viewWarningsFactors\') }}\n                </sw-button>\n            </div>\n            <div\n                v-if="showWarningsFactors"\n                class="sw-order-detail-general__maxmind-warnings-factors"\n            >\n                <ul>\n                    <li\n                        v-for="factor in warningsFactors"\n                        :key="factor"\n                    >\n                        {{ factor }}\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </sw-card>\n\n    {% parent() %}\n{% endblock %}',data(){return{showWarningsFactors:!1}},computed:{fraudScore(){return this.order?.customFields&&void 0!==this.order.customFields.maxmind_fraud_risk?this.order.customFields.maxmind_fraud_risk:"N/A"},overallRiskScore(){return this.order?.customFields?.maxmind_overall_risk_score||"N/A"},ipRiskScore(){return this.order?.customFields?.maxmind_ip_risk_score||"N/A"},transactionId(){return this.order?.customFields?.maxmind_transaction_id||""},transactionUrl(){return this.order?.customFields?.maxmind_transaction_url||"#"},warningsFactors(){let e=this.order?.customFields?.maxmind_warnings_factors||[];return Array.isArray(e)?e:[]},hasMaxMindData(){return"N/A"!==this.fraudScore||"N/A"!==this.overallRiskScore||"N/A"!==this.ipRiskScore||this.transactionId||"#"!==this.transactionUrl||this.warningsFactors.length>0}},methods:{copyTransactionId(){if(!this.transactionId){this.createNotificationError({message:this.$tc("sw-order-detail-general.maxmindFraudDetection.noTransactionId")});return}navigator.clipboard.writeText(this.transactionId).then(()=>{this.createNotificationSuccess({message:this.$tc("sw-order-detail-general.maxmindFraudDetection.transactionIdCopied")})}).catch(()=>{this.createNotificationError({message:this.$tc("sw-order-detail-general.maxmindFraudDetection.copyFailed")})})},toggleWarningsFactors(){this.showWarningsFactors=!this.showWarningsFactors},createNotificationSuccess({message:e}){this.$root.$emit("notification-create",{type:"success",message:e})},createNotificationError({message:e}){this.$root.$emit("notification-create",{type:"error",message:e})}}}),Shopware.Component.override("sw-order-list",{template:'{% block sw_order_list_grid_columns_state %}\n    <template #column-stateMachineState.name="{ item }">\n        <div class="sw-order-list__state">\n            <sw-color-badge\n                :color="getVariantFromOrderState(item)"\n                :class="getStatusBadgeClass(item.stateMachineState.technicalName)"\n                rounded\n            />\n            {{ item.stateMachineState.translated.name }}\n        </div>\n    </template>\n{% endblock %}',methods:{getStatusBadgeClass(e){switch(e){case"fraud_pass":return"sw-color-badge--fraud-pass";case"fraud_review":return"sw-color-badge--fraud-review";case"fraud_fail":return"sw-color-badge--fraud-fail";case"in_progress":return"sw-color-badge--in-progress";case"completed":return"sw-color-badge--completed";case"cancelled":return"sw-color-badge--cancelled";default:return""}},getVariantFromOrderState(e){switch(e.stateMachineState.technicalName){case"in_progress":case"fraud_review":return"primary";case"completed":case"fraud_pass":return"success";case"cancelled":case"fraud_fail":return"danger";default:return"neutral"}}}}),Shopware.Component.override("sw-order-general-info",{template:'{% block sw_order_detail_base_general_info_order_states_order %}\n    <div class="sw-order-general-info__order-state">\n        <sw-order-state-select-v2\n            v-tooltip="{\n                message: $tc(\'sw-privileges.tooltip.warning\'),\n                disabled: acl.can(\'order.editor\'),\n                showOnDisabledElements: true\n            }"\n            class="sw-order-general-info__order-state-order"\n            :class="getBackgroundStyle()"\n            :transition-options="orderStateOptions"\n            rounded-style\n            state-type="order"\n            :placeholder="order.stateMachineState.translated.name"\n            :label="$tc(\'sw-order.stateCard.headlineOrderState\')"\n            :disabled="!acl.can(\'order.editor\')"\n            @state-select="onStateSelected"\n        />\n    </div>\n{% endblock %}',methods:{getBackgroundStyle(){switch(this.order.stateMachineState.technicalName){case"in_progress":case"fraud_review":return"sw-order-state__progress-select";case"completed":case"fraud_pass":return"sw-order-state__completed-select";case"cancelled":case"fraud_fail":return"sw-order-state__cancelled-select";default:return"sw-order-state__open-select"}}}}),t(235)})();